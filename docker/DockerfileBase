FROM ros:kinetic-robot-xenial

# Install basic useful programs
# Some are just for testing that the docker image was built correctly
RUN apt-get update ; exit 0
RUN apt-get install apt-transport-https
RUN apt-get update && \
    apt-get install -y \
      curl \
      build-essential \
      cmake \
      software-properties-common \
      psmisc \
      vim \
      gedit \
      sudo \
      python-pip \
      git-all && \
    rm -rf /var/lib/apt/lists/*

# Install Required ROS Packages and Tools
RUN apt-get update && \
    apt-get install -y \
      python-catkin-tools \
      ros-kinetic-gazebo-ros-pkgs \
      ros-kinetic-gazebo-ros-control \
      ros-kinetic-rviz \
      ros-kinetic-message-to-tf \
      ros-kinetic-uuv-* && \
    rm -rf /var/lib/apt/lists/*

# Install other requirements
ADD pip_requirements.txt pip_requirements.txt
RUN apt-get update && \
    pip install -r pip_requirements.txt && \
    rm -rf /var/lib/apt/lists/*
    

# setup entrypoint
COPY ./docker/docker_entrypoint.sh /
ENTRYPOINT ["/docker_entrypoint.sh"]
CMD ["bash"]